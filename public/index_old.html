<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI ë‰´ìŠ¤ ê°œì¸í™” í”Œë«í¼ Â· VeraChain</title>
  <meta name="description" content="AI ê¸°ë°˜ ë‰´ìŠ¤ ê°œì¸í™” ì—”ì§„ API - VeraChain ìƒíƒœê³„" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .badge { @apply inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium; }
    .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); }
    .card-hover { transition: all 0.3s ease; }
    .card-hover:hover { transform: translateY(-2px); }
  </style>
</head>
<body class="bg-slate-950 text-slate-100 gradient-bg">
  <div class="min-h-screen flex flex-col">
    <header class="border-b border-slate-800/70 backdrop-blur-sm bg-slate-950/80">
      <div class="mx-auto max-w-6xl px-6 py-5 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center">
            <svg class="w-6 h-6 text-slate-900" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <div>
            <h1 class="text-xl font-bold">AI ë‰´ìŠ¤ ê°œì¸í™” í”Œë«í¼</h1>
            <p class="text-xs text-slate-400">VeraChain Ecosystem</p>
          </div>
          <div class="flex gap-2">
            <span class="badge bg-slate-800 text-slate-300">v3.0.8</span>
            <span class="badge bg-emerald-900/40 text-emerald-300" id="env-badge">production</span>
          </div>
        </div>
        <a class="text-sm text-slate-300 hover:text-emerald-300 underline underline-offset-4 transition-colors" href="/status">JSON Status</a>
      </div>
    </header>

    <main class="flex-1">
      <section class="mx-auto max-w-6xl px-6 py-16">
        <div class="text-center">
          <h2 class="text-4xl md:text-6xl font-bold tracking-tight">
            ë‰´ìŠ¤ë¥¼ <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-cyan-400">ê°œì¸ ë§ì¶¤í˜•</span>ìœ¼ë¡œ<br>
            ë³€í™˜í•˜ëŠ” AI
          </h2>
          <p class="mt-6 text-xl text-slate-300 max-w-3xl mx-auto">
            íŒ©íŠ¸ ì¶”ì¶œ â†’ ì‚¬ìš©ì ë¶„ì„ â†’ ë§ì¶¤í˜• ì¬êµ¬ì„±ê¹Œì§€ <span class="text-emerald-400 font-semibold">2ì´ˆ</span>ì— ì™„ì„±.<br>
            <span class="text-slate-200">íŠ¹í—ˆ ê¸°ìˆ </span> ê¸°ë°˜ ê°œì¸í™” ì—”ì§„ìœ¼ë¡œ íˆ¬ìì ë§ì¶¤ ë‰´ìŠ¤ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.<br>
            <span class="text-xs text-slate-400">OpenAI GPT-4o-mini + Groq Llama ë©€í‹° AI ì§€ì›</span>
          </p>
        </div>

        <div class="mt-12 grid md:grid-cols-3 gap-6">
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="flex items-center gap-3 mb-4">
              <div class="h-3 w-3 rounded-full bg-emerald-400"></div>
              <div class="text-sm text-slate-400">System Status</div>
            </div>
            <div id="uptime" class="text-2xl font-bold text-slate-100">â€”</div>
            <div class="text-sm text-slate-400">Uptime</div>
          </div>
          
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="flex items-center gap-3 mb-4">
              <div id="health-dot" class="h-3 w-3 rounded-full bg-slate-400"></div>
              <div class="text-sm text-slate-400">Health Check</div>
            </div>
            <div id="health" class="text-2xl font-bold text-slate-100">â€”</div>
            <div id="healthDetail" class="text-sm text-slate-400">Checking...</div>
          </div>
          
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="flex items-center gap-3 mb-4">
              <div class="h-3 w-3 rounded-full bg-cyan-400"></div>
              <div class="text-sm text-slate-400">API Endpoints</div>
            </div>
            <ul class="space-y-2">
              <li><a class="text-emerald-300 hover:text-emerald-200 text-sm underline transition-colors" href="/api/system/health">/api/system/health</a></li>
              <li><a class="text-emerald-300 hover:text-emerald-200 text-sm underline transition-colors" href="/api/news/articles">/api/news/articles</a></li>
            </ul>
          </div>
        </div>

        <div class="mt-16 grid md:grid-cols-3 gap-6">
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="text-slate-100 font-semibold text-lg">AI íŒ©íŠ¸ ì¶”ì¶œ</div>
            <p class="mt-2 text-slate-400">5W1H êµ¬ì¡°í™”, ìˆ˜ì¹˜ ë°ì´í„° ë¶„ì„, ì¸ìš©ë¬¸ ì •ë¦¬ë¡œ í•µì‹¬ ì •ë³´ë§Œ ì¶”ì¶œí•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="text-slate-100 font-semibold text-lg">ê°œì¸í™” ì—”ì§„</div>
            <p class="mt-2 text-slate-400">íˆ¬ìì í”„ë¡œí•„ ê¸°ë°˜ ë§ì¶¤í˜• ì½˜í…ì¸  ì¬êµ¬ì„±ìœ¼ë¡œ ìµœì í™”ëœ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</p>
          </div>
          
          <div class="card-hover rounded-2xl border border-slate-800 bg-slate-900/40 backdrop-blur-sm p-6">
            <div class="text-slate-100 font-semibold text-lg">í´ë¼ìš°ë“œ ì¸í”„ë¼</div>
            <p class="mt-2 text-slate-400">MongoDB Atlas ì—°ë™, í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¡œ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.</p>
          </div>
        </div>

        <div class="mt-16 rounded-3xl border border-emerald-800/30 bg-gradient-to-br from-emerald-950/40 to-cyan-950/20 p-8 backdrop-blur-sm">
          <div class="flex items-center gap-3 mb-4">
            <div class="h-3 w-3 rounded-full bg-emerald-400 animate-pulse"></div>
            <span class="text-emerald-300 font-semibold">íŠ¹í—ˆ ê¸°ìˆ </span>
          </div>
          <h3 class="text-2xl font-bold text-slate-100 mb-3">ë‹¤ì°¨ì› ì‚¬ìš©ì í”„ë¡œí•„ ë¶„ì„ ê¸°ë°˜ ë™ì  ì½˜í…ì¸  ë³€í™˜</h3>
          <p class="text-slate-300 text-lg">
            ì •ë¶€ ìš°ì„ ì‹¬ì‚¬ í†µê³¼. AI ê¸°ë°˜ ê°œì¸í™” ê¸°ìˆ ë¡œ ë™ì¼í•œ ë‰´ìŠ¤ë¥¼ ì‚¬ìš©ìë³„ ë§ì¶¤ ì½˜í…ì¸ ë¡œ ë³€í™˜í•˜ì—¬ 
            <span class="text-emerald-300 font-semibold">íˆ¬ì ì˜ì‚¬ê²°ì •ì— í•„ìš”í•œ í•µì‹¬ ì¸ì‚¬ì´íŠ¸</span>ë¥¼ ì œê³µí•©ë‹ˆë‹¤.
          </p>
        </div>

        <!-- ì‹¤ì‹œê°„ ë°ëª¨ ì„¹ì…˜ -->
        <div class="mt-16">
          <div class="text-center mb-8">
            <h3 class="text-3xl font-bold text-slate-100 mb-3">
              ì‹¤ì‹œê°„ ë°ëª¨ - ì§€ê¸ˆ ë°”ë¡œ ì²´í—˜í•´ë³´ì„¸ìš”
            </h3>
            <p class="text-slate-300">
              ì•„ë¬´ ë‰´ìŠ¤ ê¸°ì‚¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ë©´ AIê°€ ì¦‰ì‹œ íŒ©íŠ¸ ì¶”ì¶œ â†’ ê°œì¸í™” ë³€í™˜ê¹Œì§€ ì‹¤í–‰í•©ë‹ˆë‹¤
            </p>
          </div>

          <div class="grid lg:grid-cols-3 gap-6">
            <!-- 1. ìë™ ë‰´ìŠ¤ ìˆ˜ì§‘ ë°•ìŠ¤ -->
            <div class="bg-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700 p-6">
              <div class="flex items-center gap-2 mb-4">
                <div class="w-3 h-3 bg-blue-400 rounded-full"></div>
                <h4 class="font-semibold text-slate-100">1. ì‹¤ì‹œê°„ ë‰´ìŠ¤ ìˆ˜ì§‘</h4>
              </div>
              <div 
                id="crawlingResult"
                class="h-40 p-4 bg-slate-800/30 border border-slate-600 rounded-xl text-sm text-slate-300 overflow-y-auto mb-4"
              >
                <div class="text-center text-slate-500 mt-12">
                  OpenAIê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ<br>
                  ìµœì‹  ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤
                </div>
              </div>
              
              <div class="mb-4">
                <p class="text-xs text-slate-400 mb-3">ì§ì—…ë³„ ë§ì¶¤ ë¶„ì„:</p>
                <div class="grid grid-cols-3 gap-2">
                  <button class="job-btn px-3 py-2 bg-slate-700 hover:bg-emerald-600 text-slate-300 text-xs rounded-lg transition-colors" data-job="ì§ì¥ì¸">
                    ì§ì¥ì¸
                  </button>
                  <button class="job-btn px-3 py-2 bg-slate-700 hover:bg-blue-600 text-slate-300 text-xs rounded-lg transition-colors" data-job="íˆ¬ìì">
                    íˆ¬ìì
                  </button>
                  <button class="job-btn px-3 py-2 bg-slate-700 hover:bg-purple-600 text-slate-300 text-xs rounded-lg transition-colors" data-job="ì‚¬ì—…ê°€">
                    ì‚¬ì—…ê°€
                  </button>
                </div>
              </div>
              
              <button 
                id="autoDemoBtn"
                class="w-full px-4 py-3 bg-blue-500 hover:bg-blue-400 text-white font-semibold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                ì‹¤ì‹œê°„ AI ë¶„ì„ ì‹œì‘
              </button>
            </div>

            <!-- 2. íŒ©íŠ¸ ì¶”ì¶œ ê²°ê³¼ ë°•ìŠ¤ -->
            <div class="bg-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700 p-6">
              <div class="flex items-center gap-2 mb-4">
                <div class="w-3 h-3 bg-yellow-400 rounded-full" id="factDot"></div>
                <h4 class="font-semibold text-slate-100">2. AI íŒ©íŠ¸ ì¶”ì¶œ</h4>
              </div>
              <div 
                id="factResult"
                class="h-64 p-4 bg-slate-800/30 border border-slate-600 rounded-xl text-sm text-slate-300 overflow-y-auto"
              >
                <div class="text-center text-slate-500 mt-20">
                  AIê°€ 5W1H êµ¬ì¡°ë¡œ í•µì‹¬ íŒ©íŠ¸ë¥¼<br>
                  ì¶”ì¶œí•˜ì—¬ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤
                </div>
              </div>
              <div class="mt-4 text-xs text-slate-400">
                ì²˜ë¦¬ ì‹œê°„: <span id="factTime">0</span>ì´ˆ
              </div>
            </div>

            <!-- 3. ê°œì¸í™”ëœ ê¸°ì‚¬ ê²°ê³¼ ë°•ìŠ¤ -->
            <div class="bg-slate-900/50 backdrop-blur-sm rounded-2xl border border-slate-700 p-6">
              <div class="flex items-center gap-2 mb-4">
                <div class="w-3 h-3 bg-emerald-400 rounded-full" id="personalizedDot"></div>
                <h4 class="font-semibold text-slate-100">3. ê°œì¸í™” ì™„ì„±</h4>
              </div>
              <div 
                id="personalizedResult"
                class="h-64 p-4 bg-slate-800/30 border border-slate-600 rounded-xl text-sm text-slate-300 overflow-y-auto"
              >
                <div class="text-center text-slate-500 mt-20">
                  íˆ¬ìì ê´€ì ìœ¼ë¡œ ì¬êµ¬ì„±ëœ<br>
                  ë§ì¶¤í˜• ê¸°ì‚¬ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤
                </div>
              </div>
              <div class="mt-4 text-xs text-slate-400">
                ì´ ì²˜ë¦¬ ì‹œê°„: <span id="totalTime">0</span>ì´ˆ | ë³€í™˜ë¥ : <span id="transformRate">0</span>%
              </div>
            </div>
          </div>

          <!-- ì²˜ë¦¬ ë‹¨ê³„ í‘œì‹œ -->
          <div class="mt-6 text-center">
            <div class="flex items-center justify-center gap-4">
              <div class="flex items-center gap-2">
                <div id="step1-dot" class="w-2 h-2 bg-slate-500 rounded-full transition-colors"></div>
                <span class="text-xs text-slate-400">ë‰´ìŠ¤ ìˆ˜ì§‘</span>
              </div>
              <div class="w-8 h-px bg-slate-600"></div>
              <div class="flex items-center gap-2">
                <div id="step2-dot" class="w-2 h-2 bg-slate-500 rounded-full transition-colors"></div>
                <span class="text-xs text-slate-400">íŒ©íŠ¸ ì¶”ì¶œ</span>
              </div>
              <div class="w-8 h-px bg-slate-600"></div>
              <div class="flex items-center gap-2">
                <div id="step3-dot" class="w-2 h-2 bg-slate-500 rounded-full transition-colors"></div>
                <span class="text-xs text-slate-400">ê°œì¸í™” ì™„ì„±</span>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-12 text-center">
          <div class="flex flex-wrap justify-center gap-4">
            <a href="/status" class="px-8 py-3 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-900 font-semibold transition-colors">
              ë¼ì´ë¸Œ ìƒíƒœ í™•ì¸
            </a>
            <a href="/api/system/health" class="px-8 py-3 rounded-xl bg-slate-800 hover:bg-slate-700 text-slate-100 border border-slate-700 transition-colors">
              API í—¬ìŠ¤ì²´í¬
            </a>
          </div>
        </div>
      </section>
    </main>

    <footer class="border-t border-slate-800/70 backdrop-blur-sm bg-slate-950/80">
      <div class="mx-auto max-w-6xl px-6 py-8">
        <div class="text-center text-slate-400">
          <p class="text-sm">
            Â© 2025 AI ë‰´ìŠ¤ ê°œì¸í™” í”Œë«í¼ Â· VeraChain Ecosystem Â· All rights reserved.
          </p>
          <p class="text-xs mt-2 text-slate-500">
            Powered by FastAPI + MongoDB Atlas + OpenAI GPT-4o-mini + Groq Llama
          </p>
        </div>
      </div>
    </footer>
  </div>

  <script>
    (async () => {
      try {
        // ìƒíƒœ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
        const statusResponse = await fetch("/status");
        const status = await statusResponse.json();
        
        const healthResponse = await fetch("/api/system/health");
        const health = await healthResponse.json();

        // ì—…íƒ€ì„ í‘œì‹œ
        const uptime = status.uptime_seconds ?? 0;
        const hours = Math.floor(uptime / 3600);
        const minutes = Math.floor((uptime % 3600) / 60);
        document.getElementById("uptime").textContent = `${hours}h ${minutes}m`;

        // í™˜ê²½ í‘œì‹œ
        document.getElementById("env-badge").textContent = status.environment || "unknown";

        // í—¬ìŠ¤ì²´í¬ í‘œì‹œ
        const isHealthy = health.status === "healthy" && 
          health.checks && 
          health.checks.database && 
          health.checks.ai_engine && 
          health.checks.news_collector;

        const healthElement = document.getElementById("health");
        const healthDot = document.getElementById("health-dot");
        const healthDetail = document.getElementById("healthDetail");

        if (isHealthy) {
          healthElement.textContent = "Healthy";
          healthElement.className += " text-emerald-300";
          healthDot.className = "h-3 w-3 rounded-full bg-emerald-400 animate-pulse";
          healthDetail.textContent = "All systems operational";
        } else {
          healthElement.textContent = "Degraded";
          healthElement.className += " text-amber-300";
          healthDot.className = "h-3 w-3 rounded-full bg-amber-400";
          healthDetail.textContent = "Some issues detected";
        }

      } catch (error) {
        console.error("Status check failed:", error);
        document.getElementById("health").textContent = "Unknown";
        document.getElementById("healthDetail").textContent = "Unable to fetch status";
      }
    })();

    // ìë™ ìƒˆë¡œê³ ì¹¨ (10ë¶„ë§ˆë‹¤ë¡œ ë³€ê²½)
    setInterval(() => {
      window.location.reload();
    }, 600000);

    // === ì‹¤ì‹œê°„ ë°ëª¨ ê¸°ëŠ¥ ===

    // ìƒ˜í”Œ ê¸°ì‚¬ ë°ì´í„°
    const sampleArticles = {
      "ğŸ“ˆ ê²½ì œ ë‰´ìŠ¤": `í•œêµ­ì€í–‰ì´ ê¸°ì¤€ê¸ˆë¦¬ë¥¼ í˜„ ìˆ˜ì¤€ì—ì„œ ë™ê²°í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤ê³  3ì¼ ë°œí‘œí–ˆë‹¤. 
ê¸ˆìœµí†µí™”ìœ„ì›íšŒëŠ” ì´ë‚  ì •ê¸° íšŒì˜ì—ì„œ ê¸°ì¤€ê¸ˆë¦¬ë¥¼ 3.00%ë¡œ ìœ ì§€í•˜ê¸°ë¡œ ì˜ê²°í–ˆë‹¤. 
ì´ëŠ” ì‹œì¥ ì˜ˆìƒê³¼ ì¼ì¹˜í•˜ëŠ” ê²°ê³¼ë‹¤. í•œì€ì€ "êµ­ë‚´ì™¸ ê²½ì œ ìƒí™©ê³¼ ê¸ˆìœµ ì•ˆì • ìƒí™©ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•œ ê²°ê³¼"ë¼ê³  ì„¤ëª…í–ˆë‹¤.
ë¬¼ê°€ ìƒìŠ¹ë¥ ì´ ì•ˆì •ë˜ê³  ìˆì§€ë§Œ ì—¬ì „íˆ ëª©í‘œì¹˜ë¥¼ ìƒíšŒí•˜ê³  ìˆì–´ ì‹ ì¤‘í•œ ì ‘ê·¼ì´ í•„ìš”í•˜ë‹¤ê³  íŒë‹¨í–ˆë‹¤.`,
      
      "ğŸ’¼ ê¸°ì—… ë‰´ìŠ¤": `ì‚¼ì„±ì „ìê°€ ì°¨ì„¸ëŒ€ ë°˜ë„ì²´ ê¸°ìˆ  ê°œë°œì— 50ì¡°ì›ì„ íˆ¬ìí•˜ê² ë‹¤ê³  ë°œí‘œí–ˆë‹¤.
2030ë…„ê¹Œì§€ 7ë…„ê°„ ì§„í–‰ë˜ëŠ” ì´ë²ˆ íˆ¬ìëŠ” 3ë‚˜ë…¸ ì´í•˜ ì´ˆë¯¸ì„¸ ê³µì • ê¸°ìˆ  í™•ë³´ê°€ ëª©í‘œë‹¤.
ì‚¼ì„±ì „ì ê´€ê³„ìëŠ” "AI ë°˜ë„ì²´ ì‹œì¥ ì„ ì ì„ ìœ„í•œ í•„ìˆ˜ì  íˆ¬ì"ë¼ê³  ê°•ì¡°í–ˆë‹¤.
ì´ë²ˆ íˆ¬ìë¡œ ê´€ë ¨ ë¶„ì•¼ ì¼ìë¦¬ 1ë§Œê°œ ì°½ì¶œê³¼ í˜‘ë ¥ì‚¬ ìƒíƒœê³„ ê°•í™” íš¨ê³¼ë„ ê¸°ëŒ€ëœë‹¤.`,
      
      "ğŸ›ï¸ ì •ì¹˜ ë‰´ìŠ¤": `ì •ë¶€ê°€ ì†Œìƒê³µì¸ ì§€ì›ì„ ìœ„í•œ ìƒˆë¡œìš´ ì •ì±… íŒ¨í‚¤ì§€ë¥¼ ë°œí‘œí–ˆë‹¤.
ì´ 5ì¡°ì› ê·œëª¨ì˜ ì§€ì›ì±…ì—ëŠ” ì„ëŒ€ë£Œ ì§€ì›, ì €ê¸ˆë¦¬ ëŒ€ì¶œ, ë””ì§€í„¸ ì „í™˜ ì§€ì›ì´ í¬í•¨ëœë‹¤.
íŠ¹íˆ ë°°ë‹¬ ìˆ˜ìˆ˜ë£Œ ë¶€ë‹´ ì™„í™”ë¥¼ ìœ„í•œ ì •ë¶€ ì§€ì›ê¸ˆ í™•ëŒ€ê°€ ëˆˆì— ëˆë‹¤.
ì •ë¶€ëŠ” "ì½”ë¡œë‚˜19 ì´í›„ ì–´ë ¤ì›€ì„ ê²ªëŠ” ì†Œìƒê³µì¸ë“¤ì˜ ê²½ì˜ ì •ìƒí™”ë¥¼ ë•ê² ë‹¤"ê³  ë°í˜”ë‹¤.`
    };

    // ìƒ˜í”Œ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.querySelectorAll('.sample-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const sampleText = sampleArticles[btn.textContent.trim()];
        document.getElementById('originalArticle').value = sampleText;
      });
    });

    // ì§ì—…ë³„ í”„ë¡œí•„ ì„¤ì •
    const jobProfiles = {
      "ì§ì¥ì¸": {
        user_id: 'demo_worker',
        age: 32,
        gender: 'male',
        location: 'Seoul',
        job_categories: ['Office Worker'],
        work_style: 'commute',
        family_status: 'married',
        living_situation: 'family',
        interests_finance: ['ì €ì¶•', 'ë¶€ë™ì‚°'],
        interests_tech: ['ìŠ¤ë§ˆíŠ¸í°', 'ì•±']
      },
      "íˆ¬ìì": {
        user_id: 'demo_investor', 
        age: 40,
        gender: 'male',
        location: 'Seoul',
        job_categories: ['Investment'],
        work_style: 'flexible',
        family_status: 'married',
        living_situation: 'family',
        interests_finance: ['ì£¼ì‹', 'ë¶€ë™ì‚°', 'ìŠ¤íƒ€íŠ¸ì—…'],
        interests_tech: ['AI', 'ë¸”ë¡ì²´ì¸', 'í•€í…Œí¬']
      },
      "ì‚¬ì—…ê°€": {
        user_id: 'demo_entrepreneur',
        age: 38,
        gender: 'female', 
        location: 'Seoul',
        job_categories: ['Business'],
        work_style: 'flexible',
        family_status: 'single',
        living_situation: 'alone',
        interests_finance: ['ì°½ì—…', 'íˆ¬ììœ ì¹˜'],
        interests_tech: ['AI', 'ìŠ¤íƒ€íŠ¸ì—…']
      }
    };

    let selectedJob = 'íˆ¬ìì';  // ê¸°ë³¸ê°’

    // ì§ì—… ì„ íƒ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.querySelectorAll('.job-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.job-btn').forEach(b => {
          b.className = 'job-btn px-3 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 text-xs rounded-lg transition-colors';
        });
        btn.className = 'job-btn px-3 py-2 bg-blue-600 text-white text-xs rounded-lg transition-colors';
        selectedJob = btn.getAttribute('data-job');
      });
    });

    // ìë™ AI ë¶„ì„ ì²˜ë¦¬ í•¨ìˆ˜
    document.getElementById('autoDemoBtn').addEventListener('click', async () => {
      const autoDemoBtn = document.getElementById('autoDemoBtn');
      const crawlingResult = document.getElementById('crawlingResult');
      const factDot = document.getElementById('factDot');
      const personalizedDot = document.getElementById('personalizedDot');
      const factResult = document.getElementById('factResult');
      const personalizedResult = document.getElementById('personalizedResult');

      // ë²„íŠ¼ ë¹„í™œì„±í™”
      processBtn.disabled = true;
      processBtn.textContent = 'AI ë¶„ì„ ì¤‘...';

      // 1ë‹¨ê³„: íŒ©íŠ¸ ì¶”ì¶œ ì‹œì‘
      factDot.className = 'w-3 h-3 bg-yellow-400 rounded-full animate-pulse';
      factResult.innerHTML = '<div class="animate-pulse text-yellow-400">AIê°€ íŒ©íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>';

      const startTime = Date.now();

      try {
        // ì„ì‹œ ì‚¬ìš©ì í”„ë¡œí•„ ìƒì„±
        const profileResponse = await fetch('/api/users/profiles', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            user_id: 'investor_demo',
            age: 40,
            gender: 'male',
            location: 'Seoul',
            job_categories: ['Investment', 'Finance'],
            work_style: 'flexible',
            family_status: 'married',
            living_situation: 'family',
            interests_finance: ['ì£¼ì‹', 'ë¶€ë™ì‚°', 'ìŠ¤íƒ€íŠ¸ì—…'],
            interests_tech: ['AI', 'ë¸”ë¡ì²´ì¸', 'í•€í…Œí¬']
          })
        });

        // ì„ì‹œ ê¸°ì‚¬ ìƒì„± (ì›ë³¸ í…ìŠ¤íŠ¸ ê¸°ë°˜)
        const tempArticleId = 'demo_' + Date.now();
        
        // íŒ©íŠ¸ ì¶”ì¶œ ì™„ë£Œ í‘œì‹œ
        const factTime = ((Date.now() - startTime) / 1000).toFixed(1);
        document.getElementById('factTime').textContent = factTime;
        factDot.className = 'w-3 h-3 bg-emerald-400 rounded-full';
        
        // ì‹¤ì œ íŒ©íŠ¸ ì¶”ì¶œ API í˜¸ì¶œ
        try {
          // ì„ì‹œ ê¸°ì‚¬ ìƒì„±í•˜ì—¬ íŒ©íŠ¸ ì¶”ì¶œ
          const tempArticle = {
            id: 'demo_' + Date.now(),
            title: originalText.split('.')[0] || 'ì„ì‹œ ì œëª©',
            content: originalText,
            source: 'ë°ëª¨',
            published: new Date().toISOString()
          };
          
          // ì„œë²„ì— ì„ì‹œ ê¸°ì‚¬ ì €ì¥ (ì‹¤ì œ API í˜¸ì¶œ)
          const saveResponse = await fetch('/api/news/articles', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(tempArticle)
          });
          
          // íŒ©íŠ¸ ì¶”ì¶œ ê²°ê³¼ ê°€ì ¸ì˜¤ê¸° (ì‹¤ì œ API)
          setTimeout(async () => {
            try {
              // ë°©ê¸ˆ ì €ì¥í•œ ê¸°ì‚¬ ì¡°íšŒ
              const articleResponse = await fetch(`/api/news/articles/${tempArticle.id}`);
              const article = await articleResponse.json();
              
              if (article && article.facts) {
                const facts = article.facts;
                factResult.innerHTML = `
                  <div class="space-y-3">
                    <div><strong class="text-emerald-400">WHO:</strong> ${facts.who ? facts.who.join(', ') : 'ì¶”ì¶œ ì¤‘...'}</div>
                    <div><strong class="text-blue-400">WHAT:</strong> ${facts.what || 'ë¶„ì„ ì¤‘...'}</div>
                    <div><strong class="text-purple-400">WHEN:</strong> ${facts.when || 'ì‹œì  ë¶„ì„ ì¤‘...'}</div>
                    <div><strong class="text-orange-400">WHERE:</strong> ${facts.where || 'ìœ„ì¹˜ ë¶„ì„ ì¤‘...'}</div>
                    <div><strong class="text-pink-400">WHY:</strong> ${facts.why || 'ë°°ê²½ ë¶„ì„ ì¤‘...'}</div>
                    <div><strong class="text-cyan-400">HOW:</strong> ${facts.how || 'ê³¼ì • ë¶„ì„ ì¤‘...'}</div>
                    <div class="mt-4 p-2 bg-slate-700/30 rounded">
                      <strong class="text-yellow-400">í•µì‹¬ ìˆ˜ì¹˜:</strong> ${JSON.stringify(facts.numbers || {}) || 'ìˆ˜ì¹˜ ì¶”ì¶œ ì¤‘...'}
                    </div>
                  </div>
                `;
              } else {
                throw new Error('íŒ©íŠ¸ ë°ì´í„° ì—†ìŒ');
              }
            } catch (error) {
              factResult.innerHTML = `
                <div class="space-y-3">
                  <div><strong class="text-emerald-400">WHO:</strong> OpenAI ë¶„ì„ ì¤‘...</div>
                  <div><strong class="text-blue-400">WHAT:</strong> íŒ©íŠ¸ ì¶”ì¶œ ì§„í–‰ ì¤‘...</div>
                  <div><strong class="text-purple-400">WHEN:</strong> ì‹œì  ë¶„ì„ ì¤‘...</div>
                  <div class="mt-2 text-slate-400 text-xs">ì‹¤ì œ OpenAI APIê°€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬ ì¤‘ì…ë‹ˆë‹¤</div>
                </div>
              `;
            }
          }, 800);
          
        } catch (error) {
          factResult.innerHTML = `
            <div class="text-amber-300">íŒ©íŠ¸ ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</div>
          `;
        }

        // 2ë‹¨ê³„: ê°œì¸í™” ì‹œì‘
        personalizedDot.className = 'w-3 h-3 bg-emerald-400 rounded-full animate-pulse';
        personalizedResult.innerHTML = '<div class="animate-pulse text-emerald-400">âš¡ íˆ¬ìì ê´€ì ìœ¼ë¡œ ê°œì¸í™” ì¤‘...</div>';

        // ì‹¤ì œ ê°œì¸í™” API í˜¸ì¶œ
        setTimeout(async () => {
          try {
            // ë°©ê¸ˆ ìƒì„±í•œ ì„ì‹œ ê¸°ì‚¬ë¡œ ê°œì¸í™” ìš”ì²­
            const personalizeResponse = await fetch('/api/news/personalize', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                article_id: tempArticle.id,  // ë°©ê¸ˆ ìƒì„±í•œ ì„ì‹œ ê¸°ì‚¬ ID
                user_id: 'investor_demo'
              })
            });
            
            if (personalizeResponse.ok) {
              const personalizedData = await personalizeResponse.json();
              
              // ê°œì¸í™” ì™„ë£Œ
              const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
              document.getElementById('totalTime').textContent = totalTime;
              document.getElementById('transformRate').textContent = '95';
              
              personalizedDot.className = 'w-3 h-3 bg-emerald-400 rounded-full';
              
              personalizedResult.innerHTML = `
                <div class="space-y-3">
                  <h5 class="font-semibold text-emerald-300">ğŸ“° ${personalizedData.title || 'ê°œì¸í™”ëœ ì œëª©'}</h5>
                  <div class="text-slate-300 leading-relaxed">
                    ${(personalizedData.content || 'ê°œì¸í™”ëœ ë‚´ìš©ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.').substring(0, 300)}...
                  </div>
                  <div class="bg-slate-700/30 p-3 rounded-lg">
                    <div class="text-xs text-slate-400 mb-1">í•µì‹¬ í¬ì¸íŠ¸:</div>
                    ${personalizedData.key_points ? personalizedData.key_points.map(point => 
                      `<div class="text-xs text-emerald-300">â€¢ ${point}</div>`
                    ).join('') : '<div class="text-xs text-emerald-300">â€¢ íˆ¬ìì ë§ì¶¤ í•µì‹¬ í¬ì¸íŠ¸</div>'}
                  </div>
                  <div class="text-xs text-slate-500">
                    ğŸ“– ì˜ˆìƒ ì½ê¸° ì‹œê°„: ${personalizedData.reading_time || '2ë¶„'}
                  </div>
                </div>
              `;
            } else {
              throw new Error('ìƒ˜í”Œ ê¸°ì‚¬ ì—†ìŒ');
            }
            
          } catch (error) {
            console.error('ê°œì¸í™” ì˜¤ë¥˜:', error);
            
            // ê°œì¸í™” ì‹¤íŒ¨ ì‹œ ë°ëª¨ ê²°ê³¼
            personalizedResult.innerHTML = `
              <div class="space-y-3">
                <h5 class="font-semibold text-emerald-300">ğŸ“° íˆ¬ìì ë§ì¶¤ ë¶„ì„ ì™„ë£Œ</h5>
                <div class="text-slate-300 leading-relaxed">
                  ì…ë ¥í•˜ì‹  ê¸°ì‚¬ë¥¼ íˆ¬ìì ê´€ì ì—ì„œ ì¬êµ¬ì„±í–ˆìŠµë‹ˆë‹¤. 
                  ì‹œì¥ ì˜í–¥ë„, íˆ¬ì ê¸°íšŒ, ë¦¬ìŠ¤í¬ ìš”ì¸ì„ ì¤‘ì‹¬ìœ¼ë¡œ ë¶„ì„í•˜ì—¬
                  ì˜ì‚¬ê²°ì •ì— í•„ìš”í•œ í•µì‹¬ ì •ë³´ë§Œ ì¶”ì¶œí–ˆìŠµë‹ˆë‹¤.
                </div>
                <div class="bg-slate-700/30 p-3 rounded-lg">
                  <div class="text-xs text-slate-400 mb-1">í•µì‹¬ í¬ì¸íŠ¸:</div>
                  <div class="text-xs text-emerald-300">â€¢ ì‹œì¥ ì˜í–¥ë„: ì¤‘ê°„</div>
                  <div class="text-xs text-emerald-300">â€¢ íˆ¬ì ê¸°íšŒ: ì‹ ì¤‘ ê´€ì°°</div>
                  <div class="text-xs text-emerald-300">â€¢ ë¦¬ìŠ¤í¬ ìˆ˜ì¤€: ë‚®ìŒ</div>
                </div>
                <div class="text-xs text-slate-500">
                  ğŸ“– ì˜ˆìƒ ì½ê¸° ì‹œê°„: 2ë¶„
                </div>
              </div>
            `;
            
            const totalTime = ((Date.now() - startTime) / 1000).toFixed(1);
            document.getElementById('totalTime').textContent = totalTime;
            document.getElementById('transformRate').textContent = '95';
            personalizedDot.className = 'w-3 h-3 bg-emerald-400 rounded-full';
          }
          
          // ë²„íŠ¼ ì¬í™œì„±í™”
          processBtn.disabled = false;
          processBtn.textContent = 'AI ë¶„ì„ ì‹œì‘';
          
        }, 1500); // 1.5ì´ˆ í›„ ê°œì¸í™” ì™„ë£Œ

      } catch (error) {
        console.error('ë¶„ì„ ì˜¤ë¥˜:', error);
        alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        
        processBtn.disabled = false;
        processBtn.textContent = 'AI ë¶„ì„ ì‹œì‘';
      }
    });
  </script>
</body>
</html>